@page "/data/person/delete/{Id:int}"

@using DataAccessLibrary.Models
@using DataAccessLibrary
@using PersonManagerUI.Components

@inject IPeopleData _db
@inject NavigationManager _navigationManager

<h3>Delete</h3>

<h4 style="color: red">Are you sure you want to delete this person?</h4>

<PersonDetails Person="person" ShowPersonName="false" />

<button class="btn btn-danger" @onclick="DeletePerson">Delete</button> | <a href="data/people/index/">Cancel</a>

@code {

    [Parameter]
    public int Id { get; set; }

    private PersonModel person = new PersonModel();

    protected override async Task OnInitializedAsync()
    {
        person = await _db.GetPerson(Id);
    }

    private void DeletePerson()
    {
        _db.DeletePerson(Id);

        _navigationManager.NavigateTo("data/people/index");
    }

}
